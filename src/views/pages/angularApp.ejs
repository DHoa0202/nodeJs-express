<h1 id="angular"></h1>
<main ng-app="app" ng-controller="control">
    <!-- TAB NAVIGATION -->
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#category">Category</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#product">Product</button>
        </li>
    </ul>
    <!-- TAB CONTENT -->
    <div class="tab-content">
        <!-- CATEGORIES -->
        <div class="tab-pane fade show active" id="category">
            <h1>Category(APIs)</h1>
            <table class="table table-striped table-hover">
                <thead>
                    <!-- ATTRIBUTES're NAME -->
                    <tr class="text-center">
                        <th>id</th>
                        <th>name</th>
                        <th>control</th>
                    </tr>
                    <!-- SHOW DETAILS -->
                    <tr>
                        <td><input class="form-control" type="number" ng-model="category.id"></td>
                        <td><input class="form-control" type="text" ng-model="category.name"></td>
                        <td>
                            <div class="d-flex gap-3 justify-content-end">
                                <button type="submit" class="btn btn-outline-success"
                                    ng-click="post(category,'cates','id', 'categories')">Create</button>
                                <button type="submit" class="btn btn-outline-warning"
                                    ng-click="put(category,'cates','id', 'categories')">Update</button>
                                <button type="button" class="btn btn-outline-secondary ms-1"
                                    ng-click="clear(category)">clear</button>
                            </div>
                        </td>
                    </tr>
                </thead>
                <!-- DISPLAY LIST OF DATA -->
                <tbody>
                    <tr ng-repeat="(i,e) in cates">
                        <td ng-bind="e.id"></td>
                        <td ng-bind="e.name"></td>
                        <td class="text-end">
                            <a href="" ng-click="read(e, 'category')">detail</a>
                            <button class="btn btn-outline-danger"
                                ng-click="delete(e.id,'cates', 'id', 'categories')">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- PRODUCTS -->
        <div class="tab-pane fade" id="product">
            <h1>Product</h1>
            <table class="table table-striped table-hover">
                <thead>
                    <!-- ATTRIBUTES're NAME -->
                    <tr class="text-center">
                        <th class="text-start">image</th>
                        <th>id</th>
                        <th>name</th>
                        <th>price</th>
                        <th>quantity</th>
                        <th>regDate</th>
                        <th>category_name</th>
                        <th class="text-end">control</th>
                    </tr>
                    <!-- SHOW DETAILS -->
                    <tr class="vertical-middle">
                        <td><input type="text" class="form-control" ng-model="product.image"></td>
                        <td><input class="form-control" type="number" ng-model="product.id"></td>
                        <td><input class="form-control" type="text" ng-model="product.name"></td>
                        <td><input class="form-control" type="number" step=".1" ng-model="product.price"></td>
                        <td><input class="form-control" type="number" ng-model="product.quantity"></td>
                        <td>
                            <input type="hidden" ng-model="product.regDate" ng-model="product.regDate">
                            <span class="form-control bg-secondary text-nowrap bg-opacity-25">
                                {{product.regDate | dateRelative:'LLLL'}}
                            </span>
                        </td>
                        <td>
                            <select class="form-control border-warning" ng-model="product.category_id"
                                convert-to-number>
                                <option value="{{e.id}}" ng-repeat="e in cates" ng-bind="e.name"></option>
                            </select>
                        </td>
                        <td>
                            <form class="text-center d-flex gap-3">
                                <div class="d-flex gap-3 justify-content-end">
                                    <button type="submit" class="btn btn-outline-success"
                                        ng-click="post(product,'data','id', 'products')">Create</button>
                                    <button type="submit" class="btn btn-outline-warning"
                                        ng-click="put(product,'data','id', 'products')">Update</button>
                                    <button type="button" class="btn btn-outline-secondary ms-1"
                                        ng-click="clear(product)">clear</button>
                                </div>
                            </form>
                        </td>
                    </tr>
                </thead>
                <!-- DISPLAY LIST OF DATA -->
                <tbody>
                    <tr style="vertical-align: middle;" ng-repeat="(i,e) in data">
                        <td>
                            <img src="{{e.image}}" alt="{{e.image}}" style="width: 64px; object-fit: cover;">
                        </td>
                        <td>{{e.id}}</td>
                        <td>{{e.name}}</td>
                        <td>{{e.price}}</td>
                        <td>{{e.quantity}}</td>
                        <td>{{e.regDate | dateRelative : 'LLLL'}}</td>
                        <td>{{e.category_name}}</td>
                        <td class="text-end">
                            <a href="" ng-click="read(e, 'product')">detail</a>
                            <button class="btn btn-outline-danger"
                                ng-click="delete(e.id,'data', 'id', 'products')">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Angular JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-route.min.js"></script>
    <!-- MomentJS -->
    <script src="https://momentjs.com/downloads/moment-with-locales.js" crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <!-- My angularJS application -->
    <script src="/js/angularApp.js"></script>
</main>